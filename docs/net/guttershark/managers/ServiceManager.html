<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../../style.css" type="text/css" media="screen">
<link rel="stylesheet" href="../../../print.css" type="text/css" media="print">
<meta content="ServiceManager,net.guttershark.managers.ServiceManager,createHTTPService,createRemotingService,gi" name="keywords">
<title>net.guttershark.managers.ServiceManager</title>
</head>
<body>
<script type="text/javascript" language="javascript" src="../../../asdoc.js"></script><script type="text/javascript" language="javascript" src="../../../cookies.js"></script><script type="text/javascript" language="javascript">
<!--
				asdocTitle = 'ServiceManager - Guttershark Flash API Docs';
				var baseRef = '../../../';
				window.onload = configPage;
			--></script>
<table style="display:none" id="titleTable" cellspacing="0" cellpadding="0" class="titleTable">
<tr>
<td align="left" class="titleTableTitle">Guttershark Flash API Docs</td><td align="right" class="titleTableTopNav"><a onclick="loadClassListFrame('../../../all-classes.html')" href="../../../package-summary.html">All&nbsp;Packages</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../../all-classes.html')" href="../../../class-summary.html">All&nbsp;Classes</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../../index-list.html')" href="../../../all-index-A.html">Index</a>&nbsp;|&nbsp;<a href="../../../index.html?net/guttershark/managers/ServiceManager.html&amp;net/guttershark/managers/class-list.html" id="framesLink1">Frames</a><a onclick="parent.location=document.location" href="" style="display:none" id="noFramesLink1">No&nbsp;Frames</a></td><td rowspan="3" align="right" class="titleTableLogo"><img alt="Adobe Logo" title="Adobe Logo" class="logoImage" src="../../../images/logo.jpg"></td>
</tr>
<tr class="titleTableRow2">
<td align="left" id="subTitle" class="titleTableSubTitle">Class&nbsp;ServiceManager</td><td align="right" id="subNav" class="titleTableSubNav"><a href="#methodSummary">Methods</a></td>
</tr>
<tr class="titleTableRow3">
<td colspan="2">&nbsp;</td>
</tr>
</table>
<script type="text/javascript" language="javascript">
<!--
if (!isEclipse() || window.name != ECLIPSE_FRAME_NAME) {titleBar_setSubTitle("ClassÂ ServiceManager"); titleBar_setSubNav(false,false,false,false,false,false,true,false,false,false,false,false,false,false);}
--></script>
<div class="MainContent">
<table cellspacing="0" cellpadding="0" class="classHeaderTable">
<tr>
<td class="classHeaderTableLabel">Package</td><td><a onclick="javascript:loadClassListFrame('class-list.html')" href="package-detail.html">net.guttershark.managers</a></td>
</tr>
<tr>
<td class="classHeaderTableLabel">Class</td><td class="classSignature">public dynamic  class ServiceManager</td>
</tr>
<tr>
<td class="classHeaderTableLabel">Inheritance</td><td class="inheritanceList">ServiceManager <img class="inheritArrow" alt="Inheritance" title="Inheritance" src="../../../images/inherit-arrow.gif"> flash.utils.Proxy</td>
</tr>
</table>
<p></p>
  The ServiceManager Class supports making Remoting
  requests, and normal HTTP service requests, with
  support for retries, timeouts, and some features that
  are specific to one or the other.
  
  <p></p>
<br>
<span class="label">Example</span>
<br>Setting up a remoting service:
  <div class='listing'><pre> 
  import net.guttershark.managers.ServiceManager;
  import net.guttershark.support.serviceamanager.shared.CallResult;
  import net.guttershark.support.serviceamanager.shared.CallFault;
  
  var sm:ServiceManager = ServiceManager.gi();
  
  //this sets up a remoting service.
  sm.createRemotingService("users","http://localhost/amfphp/gateway.php",3,1,3000,true);
  
  //make a remoting call.
  sm.users.getAllUsers({onResult:onr,onFault:onf});
  function onr(cr:CallResult):void{}
  function onf(cf:CallFault):void{}
  </pre></div>
  
  <p>The above example is the most basic remoting call,but there are
  other callbacks you can supply, as well as supply the number
  of attempts that will be attempted, and the time before a call
  is considered timed-out (to initiate a retry).</p>
  
  <p>Supported properties on the callProps object for a <strong>remoting service call</strong>:</p>
  <ul>
  <li>params (Array) - The parameters to send to the remoting service.</li>
  <li>onCreate (Function) - A function to call, as soon as a remoting call instance was created (the request hasn't gone out yet though.).</li>
  <li>onResult (Function) - A function to call, and pass a CallResult object to.</li>
  <li>onFault (Function) - A function to call, and pass a CallFault object to.</li>
  <li>onRetry (Function) - A function to call for every retry of a service call.</li>
  <li>onTimeout (Function) - A function to call after every retry has been attempted, and no result or fault was returned.</li>
  <li>attempts (int) - The number of retry attempts allowed.</li>
  <li>timeout (int - milliseconds) - The amount of time allowed for each call before another attempt is made.</li>
  <li>returnArgs (Boolean) - Return the original <em><code>callprops.params</code></em> sent through the
  request as the second parameter to your onResult, or onFault callback</li>
  </ul>
  
  <p></p>An extended remoting call example, with all callProp objects filled in:
  <div class='listing'><pre> 
  import net.guttershark.managers.ServiceManager;
  import net.guttershark.support.serviceamanager.shared.CallResult;
  import net.guttershark.support.serviceamanager.shared.CallFault;
  
  var sm:ServiceManager = ServiceManager.gi();
  
  //this sets up a remoting service.
  sm.createRemotingService("users","http://localhost/amfphp/gateway.php",3,1,3000,true);
  
  //make a remoting call.
  sm.users.getUserByName({param:["sam"],onResult:onr,onFault:onf,onCreate:onc,onRetry:onrt,onTimeout:ont,attempts:2,timeout:3000,returnArgs:true});
  function onr(cr:CallResult,params:Array):void{} //onResult
  function onf(cf:CallFault,params:Array):void{} //onFault
  function onc():void{} //onCreate
  function onrt():void{} //onRetry
  function ont:void(){} //onTimeout
  </pre></div>
  
  <p>A remoting service supports something called a "limiter" which means
  that if a request is being made to a service with X parameters, another
  request to that service CANNOT be made until a result,timeout,or fault
  occurs on the first call.</p>
  
  <p>Now into HTTP Service calls</p>
  
  <p></p>Setting up an HTTP Service and make a basic call:
  <div class='listing'><pre> 
  import net.guttershark.managers.ServiceManager;
  import net.guttershark.support.serviceamanager.shared.CallResult;
  import net.guttershark.support.serviceamanager.shared.CallFault;
  
  var sm:ServiceManager = ServiceManager.gi();
  
  sm.createHTTPService("codeigniter","http://localhost/codeigniter/index.php/",3,3000,false,"variables");
  
  sm.codeigniter({routes:["user","name"],onResult:onr,onFault:onf}); // -> http://localhost/codeigniter/index.php/user/name
  </pre></div>
  
  <p>The above example is a basic HTTP Service call. The "routes" parameter is optional,
  but in this case, because code igniter is being used on the server, which is route based,
  we can supply these routes. But this is optional, see below for all available parameters</p>
  
  <p>Supported properties on the callProps object for a <strong>http service call</strong>:</p>
  <ul>
  <li>data (Object) - Data to submit to the service (post or get).</li>
  <li>routes (Array) - An array of "route" paths that get concatenated together.</li>
  <li>method (String) - post or get</li>
  <li>responseFormat (String) - The response format to expect, see net.guttershark.support.servicemanager.http.ResponseFormat.</li>
  <li>onCreate (Function) - A function to call, as soon as a remoting call instance was created (the request hasn't gone out yet though.).</li>
  <li>onResult (Function) - A function to call, and pass a CallResult object to.</li>
  <li>onFault (Function) - A function to call, and pass a CallFault object to.</li>
  <li>onRetry (Function) - A function to call for every retry of a service.</li>
  <li>onTimeout (Function) - A function to call after every retry has been attempted, and no result was returned.</li>
  <li>attempts (int) - The number of retry attempts allowed.</li>
  <li>timeout (int - milliseconds) - The amount of time allowed for each call before another attempt is made.</li>
  </ul>
  
  <p></p>Another example that submits data as a POST request to a service:
  <div class='listing'><pre> 
  import net.guttershark.managers.ServiceManager;
  import net.guttershark.support.serviceamanager.shared.CallResult;
  import net.guttershark.support.serviceamanager.shared.CallFault;
  
  var sm:ServiceManager = ServiceManager.gi();
  
  sm.createHTTPService("sendEmail","http://localhost/sendEmail.php",3,5000,false);
  
  sm.sendEmail({responseFormat:"variables",data:{toEmail:"test&#64;example.com",subject:"Example",message:"Hello World"},onResult:onr,onFault:onf});
  function onr(cr:CallResult):void{}
  function onf(cf:CallFault):void{}
  </pre></div>
  
  <p>When you are creating a service (createHTTPService / createRemotingService) the parameters
  you give to the service are the "defaults", but you can override the attempts,timeout,limiter
  parameter by supplying it in the callProps object.</p>
  
  <p>HTTP Service's must supply a reponse format for each call, whether it be the default
  that was defined when calling createHTTPService, or by overriding it in a callProp.
  Each call response that is received is parsed differently depending on the response format,
  and the result property on the CallResult object is also different.</p>
  
  <p>HTTP Service calls support a couple extra features, if you follow the rules with the
  responses from the server.</p>
  
  <p><strong>for "xml" responses</strong></p>
  <p>A successful xml response can be any well formed xml</p>
  <p>To indicate a fault, send an XML structure like this as the response:</p> 
  <div class='listing'><pre> 
  &lt;root&gt;
      &lt;fault&gt;my message&lt;/fault&gt;
  &lt;/root&gt;
  </pre></div>
  
  <p><strong>for "variable" responses</strong></p>
  <p>The response should be a url encoded string like so: (name=asdfasd&email=asdfasd&test=sdfsdf)</p>
  <p>To indicate a fault through variables define it like so: (fault=my%20fault%20message).</p>
  <p></p>
<br>
<hr>
</div>
<a name="methodSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Methods</div>
<table id="summaryTableMethod" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#createHTTPService()">createHTTPService</a>(id:String, url:String, attempts:int = 1, timeout:int = 10000, limiter:Boolean = false, defaultResponseFormat:String = "variables"):void</div>
<div class="summaryTableDescription">
   Creates a new http service internally, that you can access as a property on the service manager instance.</div>
</td><td class="summaryTableOwnerCol">ServiceManager</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#createRemotingService()">createRemotingService</a>(id:String, gateway:String, endpoint:String, objectEncoding:int, attempts:int = 1, timeout:int = 10000, limiter:Boolean = false):void</div>
<div class="summaryTableDescription">
   Creates a new remoting service internally, that you can access as a property on the service manager instance.</div>
</td><td class="summaryTableOwnerCol">ServiceManager</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#gi()">gi</a>():<a href="../managers/ServiceManager.html">ServiceManager</a>
</div>
<div class="summaryTableDescription">[static]
   Singleton access.</div>
</td><td class="summaryTableOwnerCol">ServiceManager</td>
</tr>
</table>
</div>
<script type="text/javascript" language="javascript">
<!--
showHideInherited();
--></script>
<div class="MainContent">
<a name="methodDetail"></a>
<div class="detailSectionHeader">Method detail</div>
<a name="createHTTPService()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">createHTTPService</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td>
</tr>
</table>
<div class="detailBody">
<code>public function createHTTPService(id:String, url:String, attempts:int = 1, timeout:int = 10000, limiter:Boolean = false, defaultResponseFormat:String = "variables"):void</code><p>
   Creates a new http service internally, that you can access as a property on the service manager instance.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">id</span>:String</code> &mdash; The id for the service - you can access the service dyanmically as well, like serviceManager.{id}.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">url</span>:String</code> &mdash; The http url for the service.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">attempts</span>:int</code> (default = <code>1</code>)<code></code> &mdash; The number of attempts that will be allowed for each service call - this sets the default, but can be overwritten by a callProps object.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">timeout</span>:int</code> (default = <code>10000</code>)<code></code> &mdash; The time allowed for each call, before making another attempt.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">limiter</span>:Boolean</code> (default = <code>false</code>)<code></code> &mdash; Use a call limiter. (currently not available for HTTP, but plans to add in, in the future.)
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">defaultResponseFormat</span>:String</code> (default = "<code>variables</code>")<code></code> &mdash; The default response format ("variables","xml","text","binary"), see net.guttershark.support.servicemanager.http.ResponseFormat.
   </td>
</tr>
</table>
</div>
<a name="createRemotingService()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">createRemotingService</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function createRemotingService(id:String, gateway:String, endpoint:String, objectEncoding:int, attempts:int = 1, timeout:int = 10000, limiter:Boolean = false):void</code><p>
   Creates a new remoting service internally, that you can access as a property on the service manager instance.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">id</span>:String</code> &mdash; The id for the service - you can access the service dyanmically as well, like serviceManager.{id}.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">gateway</span>:String</code> &mdash; The gateway url for the remoting server.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">endpoint</span>:String</code> &mdash; The service endpoint, IE: com.test.Users.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">objectEncoding</span>:int</code> &mdash; The object encoding, 0 or 3.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">attempts</span>:int</code> (default = <code>1</code>)<code></code> &mdash; The number of attempts that will be allowed for each service call - this sets the default, but can be overwritten by a callProps object.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">timeout</span>:int</code> (default = <code>10000</code>)<code></code> &mdash; The time allowed for each call, before making another attempt.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">limiter</span>:Boolean</code> (default = <code>false</code>)<code></code> &mdash; Use a call limiter.
   </td>
</tr>
</table>
</div>
<a name="gi()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">gi</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public static function gi():<a href="../managers/ServiceManager.html">ServiceManager</a></code><p>
   Singleton access.
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code><a href="../managers/ServiceManager.html">ServiceManager</a></code></td>
</tr>
</table>
</div>
<br>
<br>
<hr>
<br>
<p></p>
<center class="copyright"> 
</center>
</div>
</body>
</html>
<!-- -->
